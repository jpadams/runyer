module MCollective
  module Agent
    class <%= @action_name.capitalize %><RPC::Agent
      activate_when do
        <%= @activate_condition %> 
      end

      action "run" do
        command = '<%= @command %>'
        if MCollective::Util.windows?
	        command = "cmd /c #{command}"
        end

        reply[:status] = run(command,:stdout => :out, :stderr => :err, :chomp => true)
      end
    end
  end
end
